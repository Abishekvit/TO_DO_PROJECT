<% layout('layouts/boilerplate') %>

<div class="container my-5">
<div class="row">
<div class="col-12 text-center mb-4">
<h1 class="display-4 fw-bold toggle"><%= list.name %></h1>
</div>
<div class="col-md-8 offset-md-2">
<div class="card shadow-sm rounded-4 border-0 mb-4">
<div class="card-body">
<h5 class="card-title text-muted mb-3">Tasks</h5>
<% if (list.tasks && list.tasks.length > 0) { %>
<ul class="list-group list-group-flush">
<% for(let task of list.tasks) { %>
<li class="list-group-item d-flex justify-content-between align-items-center">
<div class="form-check">
<input class="form-check-input" type="checkbox" value="" id="task-<%= task._id %>" <%= task.completed ? 'checked' : '' %> disabled>
<label class="form-check-label <%= task.completed ? 'text-decoration-line-through text-muted' : '' %>" for="task-<%= task._id %>">
<%= task.title %>
</label>
</div>
<div class="btn-group" role="group" aria-label="Task actions">
<a href="/lists/<%= list._id %>/tasks/<%= task._id %>/edit" class="btn btn-sm btn-outline-secondary rounded-pill me-1" title="Edit Task">
<i class="fa-solid fa-pen-to-square"></i>
</a>
<form method="POST" action="/lists/<%= list._id %>/tasks/<%= task._id %>?_method=DELETE" class="d-inline">
<button class="btn btn-sm btn-outline-danger rounded-pill" title="Delete Task">
<i class="fa-solid fa-trash-can"></i>
</button>
</form>
</div>
</li>
<% } %>
</ul>
<% } else { %>
<p class="text-muted text-center mt-3">This list has no tasks yet.</p>
<% } %>
</div>
</div>

        <div class="d-flex justify-content-between align-items-center mb-4">
            <a href="/lists" class="btn btn-outline-dark rounded-pill shadow-sm">
                <i class="fa-solid fa-arrow-left me-2 toggle"></i><span class="toggle">Back to all lists</span>
            </a>
            <a href="/lists/<%= list._id %>/tasks/new" class="btn btn-primary rounded-pill shadow">
                <i class="fa-solid fa-plus me-2"></i>Add New Task
            </a>
        </div>

        <div class="d-grid gap-2">
            <form method="POST" action="/lists/<%= list._id %>?_method=DELETE">
                <button class="btn btn-danger btn-lg rounded-pill shadow w-100">
                    Delete this List
                </button>
            </form>
        </div>
    </div>
</div>

</div>