<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo App</title>
    <link rel="stylesheet" href="/css/style.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet">
</head>
<body>
    <div class="curtain">
    <h1 class="curtain-text">‚ÄúPlan. Act. Achieve.‚Äù</h1>
    </div>
    <%- include("../includes/navbar.ejs") %>
    <div class="container">
        <%- include("../includes/flash.ejs") %>
        <%- body %></div>
    <%- include("../includes/footer.ejs") %>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
    <script src="/js/script.js"></script>
    <script>
window.addEventListener("load", () => {
    const curtain = document.querySelector(".curtain");
    const content = document.querySelector(".site-content");

    if (!sessionStorage.getItem("curtainShown")) {
        curtain.style.display = "flex"; 
        setTimeout(() => {
            curtain.classList.add("open"); 
            setTimeout(() => {
                curtain.style.display = "none"; 
                content.classList.add("show"); 
            }, 2000); 
        }, 500); 
        sessionStorage.setItem("curtainShown", "true"); 
    } else {
        curtain.style.display = "none";
        content.classList.add("show");
    }
});
</script>
<script>
const toggleBtn = document.getElementById("theme-toggle");

if (localStorage.getItem("theme") === "dark") {
  document.body.classList.add("dark-mode");
  toggleBtn.textContent = "‚òÄÔ∏è";
}

toggleBtn.addEventListener("click", () => {
  document.body.classList.toggle("dark-mode");
  if (document.body.classList.contains("dark-mode")) {
    localStorage.setItem("theme", "dark");
    toggleBtn.textContent = "‚òÄÔ∏è"; 
  } else {
    localStorage.setItem("theme", "light");
    toggleBtn.textContent = "üåô"; 
  }
});
</script>
<script>
  document.querySelectorAll('.add-task-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const listId = btn.dataset.listId;
      const listName = btn.dataset.listName;

      const modalLabel = document.getElementById('addTaskLabel');
      const form = document.getElementById('addTaskForm');
      const taskInput = document.getElementById('taskTitle');
      const dueDateInput = document.getElementById('taskDueDate');

      modalLabel.textContent = `Add Task to ${listName}`;
      form.action = `/lists/${listId}/tasks`;
      taskInput.value = "";

      const modal = new bootstrap.Modal(document.getElementById('addTaskModal'));
      modal.show();

      form.onsubmit = () => {
        if (!taskInput.value.trim()) {
          taskInput.value = "Task: No Description";
        }
        const today = new Date().toISOString().split('T')[0];
        dueDateInput.value = today;
      };
    });
  });
</script>



</body>
</html>