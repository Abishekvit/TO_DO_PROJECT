<% layout('layouts/boilerplate') %>

<div class="container my-5">
<div class="row">
<div class="col-md-6 offset-md-3">
<h1 class="display-5 fw-bold text-center mb-4">Edit Task</h1>
<form action="/lists/<%= list._id %>/tasks/<%= task._id %>?_method=PUT" method="POST" class="needs-validation" novalidate>
<div class="mb-3">
<label for="title" class="form-label fw-bold">Task Title</label>
<input name="task[title]" type="text" class="form-control" id="title" value="<%= task.title %>" required>
<div class="invalid-feedback">
Please provide a valid task title.
</div>
</div>
<div class="mb-3">
<label for="description" class="form-label fw-bold">Description</label>
<textarea name="task[description]" class="form-control" id="description" rows="3"><%= task.description %></textarea>
</div>
<div class="mb-3">
<label for="dueDate" class="form-label fw-bold">Due Date</label>
<input name="task[dueDate]" type="date" class="form-control" id="dueDate" value="<%= task.dueDate ? task.dueDate.toISOString().substring(0, 10) : '' %>">
</div>
<div class="mb-3">
<label for="priority" class="form-label fw-bold">Priority</label>
<select name="task[priority]" class="form-select" id="priority">
<option value="low" <%= task.priority === 'low' ? 'selected' : '' %>>Low</option>
<option value="medium" <%= task.priority === 'medium' ? 'selected' : '' %>>Medium</option>
<option value="high" <%= task.priority === 'high' ? 'selected' : '' %>>High</option>
</select>
</div>
<div class="d-grid gap-2 mb-3">
<button class="btn btn-primary btn-lg fw-bold rounded-pill">Update Task</button>
</div>
</form>
<form method="POST" action="/lists/<%= list._id %>/tasks/<%= task._id %>?_method=DELETE" class="d-grid gap-2">
<button class="btn btn-outline-danger btn-lg fw-bold rounded-pill">Delete Task</button>
</form>
<div class="text-center mt-3">
<a href="/lists/<%= list._id %>" class="btn btn-outline-secondary rounded-pill">
<i class="fa-solid fa-arrow-left me-2"></i>Back to list
</a>
</div>
</div>
</div>
</div>